(this.webpackJsonpphotos=this.webpackJsonpphotos||[]).push([[0],{2:function(t,e,n){"use strict";var a=n(6),c=n(4),r=n(5),s=n.n(r),i=n(7),o=n(21),u=n(18),l=n.n(u),d=function(){var t=Object(i.a)(s.a.mark((function t(){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return"/api/ini",t.abrupt("return",l()("/api/ini",{method:"get",headers:{accept:"application/json"}}).then(h).then((function(t){return t.json()})).catch((function(t){return t})));case 2:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();function h(t){if(t.status>=200&&t.status<300)return t;var e=new Error("HTTP Error ".concat(t.statusText));throw e.status=t.statusText,e.response=t,e}var b=Object(o.a)({active:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"All",e=arguments.length>1?arguments[1]:void 0;return"OPEN_THREAD"===e.type?e.title:"SUCCEED"===e.type?"All":t},threads:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT":return e.payload.threads;case"MARK-BUY":var n=t.findIndex((function(t){return e.title===t.title})),r=t[n].urls,s=r.findIndex((function(t){return e.url===t.url})),i=r[s],o=[].concat(Object(c.a)(r.slice(0,s)),[{url:i.url,buy:!i.buy}],Object(c.a)(r.slice(s+1,r.length)));return[].concat(Object(c.a)(t.slice(0,n)),[{title:t[n].title,urls:o}],Object(c.a)(t.slice(n+1,t.length)));case"SUCCEED":var u,l=[],d=Object(a.a)(t);try{for(d.s();!(u=d.n()).done;){var h,b=u.value,p=[],j=Object(a.a)(b.urls);try{for(j.s();!(h=j.n()).done;){var f=h.value;p.push({url:f.url,buy:!1})}}catch(y){j.e(y)}finally{j.f()}l.push({title:b.title,urls:p})}}catch(y){d.e(y)}finally{d.f()}return l;default:return t}},buy:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0,n=e.type;switch(n){case"MARK-BUY":var a=t.findIndex((function(t){return e.title===t.title}));if(-1!==a){var r=t[a].urls,s=r.findIndex((function(t){return e.url===t.url}));if(-1!==s){var i=[].concat(Object(c.a)(r.slice(0,s)),Object(c.a)(r.slice(s+1,r.length)));return[].concat(Object(c.a)(t.slice(0,a)),[{title:t[a].title,urls:i}],Object(c.a)(t.slice(a+1,t.length)))}return[].concat(Object(c.a)(t.slice(0,a)),[{title:t[a].title,urls:r.concat({url:e.url,buy:!0})}],Object(c.a)(t.slice(a+1,t.length)))}return t.concat({title:e.title,urls:[{url:e.url,buy:!0}]});case"SUCCEED":return[];default:return t}},pay:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"OPEN_PAY":return{loadStripe:e.promise,status:"open",open:!0,number:e.number};case"CLOSE_PAY":return{loadStripe:"",status:e.status,open:!1,number:e.number};case"SUCCEED":return{loadStripe:"",status:"close",open:!1,number:0};default:return t}},windClick:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},e=arguments.length>1?arguments[1]:void 0;return"WIN-CLICK"===e.type?{side:e.disp.side||t.side,up:e.disp.up||t.up}:t},purchasedPhotos:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],e=arguments.length>1?arguments[1]:void 0;switch(e.type){case"INIT":return e.payload.purchasedPhotos;case"SUCCEED":var n=[],a=e.payload;a.forEach((function(t){t.urls.forEach((function(t){n.push(t.url)}))}));var r=new Set([].concat(Object(c.a)(t),n));return localStorage.rdz_keys=JSON.stringify(Object(c.a)(r)),Object(c.a)(r);default:return t}}});var p=Object(o.b)(b);d().then((function(t){var e=[],n=localStorage.rdz_keys?JSON.parse(localStorage.rdz_keys):[];console.log(n);var c,r=Object(a.a)(t.threads);try{for(r.s();!(c=r.n()).done;){var s=c.value,i=s.urls.map((function(t){return{url:t,buy:!1}}));e.push({title:s.title,urls:i})}}catch(o){r.e(o)}finally{r.f()}p.dispatch({type:"INIT",payload:{threads:e,purchasedPhotos:n}})})).catch((function(t){return console.log(t)})),e.a=p},24:function(t,e,n){"use strict";(function(t){var a=n(5),c=n.n(a),r=n(14),s=n(15),i=n(17),o=n(16),u=n(6),l=n(7),d=n(3),h=n.n(d),b=n(25),p=n(26),j=n.n(p),f=n(27),y=n(28),O=n(29),v=n(8),m=n(30),x=n(2),g=n(31),C=n(32),k=(n(49),n(50),n(20)),w=n(10),S=n(34),N=n(33),E=n(1),P=Object(O.a)("pk_test_51JQK47EPLWeDUJKNpEiPwz6JrPWY9vaAfsyDNAI0X596FOlVjKhSVNBCZ7EljmBcgULtXZ9tF4bG2xGA9TbmtW0a00iC12PgmI");function I(){return A.apply(this,arguments)}function A(){return(A=Object(l.a)(c.a.mark((function e(){var n,a,r,s,i,o;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n=j()(),a=0,e.next=4,Object(g.a)({buy:x.a.getState().buy});case 4:r=e.sent,s=Object(u.a)(r.images);try{for(s.s();!(i=s.n()).done;)o=i.value,n.file("Photo-".concat(++a,".jpg"),t.from(o).toString("base64"),{base64:!0})}catch(c){s.e(c)}finally{s.f()}n.generateAsync({type:"blob"}).then((function(t){Object(b.saveAs)(t,"Photos.zip")}));case 8:case"end":return e.stop()}}),e)})))).apply(this,arguments)}window.onclick=function(){var t=document.querySelector(".head");t.offsetHeight>1&&(t.style.height="0px",x.a.dispatch({type:"WIN-CLICK",disp:{up:"down"}}));var e=document.querySelector(".tabs-container");e.classList.contains("trasl")&&(e.classList.remove("trasl"),x.a.dispatch({type:"WIN-CLICK",disp:{side:"back"}}))};var D=0,T=0;function L(){var t=0;D=T;var e,n=Object(u.a)(x.a.getState().buy);try{for(n.s();!(e=n.n()).done;){t+=e.value.urls.length}}catch(a){n.e(a)}finally{n.f()}return D!==(T=t)}var U=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).state={down:!1,side:!1},t.onDownClick=function(t){var e=document.querySelector(".head"),n=document.querySelector(".container"),a=document.querySelector(".bar"),c=window.innerHeight-a.offsetHeight;e.offsetHeight<10?(e.style.height=Math.min(n.offsetHeight,c)+"px",x.a.dispatch({type:"WIN-CLICK",disp:{up:"up"}})):(e.style.height="0px",x.a.dispatch({type:"WIN-CLICK",disp:{up:"down"}}))},t.onSideClick=function(t){var e=document.querySelector(".tabs-container"),n=e.classList.toggle("trasl"),a=document.querySelector(".tabs").offsetHeight,c=window.innerHeight-a;e.style.overflow=n&&c<60?"scroll":"",n?x.a.dispatch({type:"WIN-CLICK",disp:{side:"side"}}):x.a.dispatch({type:"WIN-CLICK",disp:{side:"back"}}),t.stopPropagation()},t.onBuyClick=function(t){x.a.dispatch({type:"OPEN_THREAD",title:t})},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;x.a.subscribe((function(){t.forceUpdate()}))}},{key:"render",value:function(){var t,e=this,n=0,a=Object(u.a)(x.a.getState().buy);try{for(a.s();!(t=a.n()).done;){n+=t.value.urls.length}}catch(r){a.e(r)}finally{a.f()}var c=x.a.getState().active;return Object(E.jsxs)("header",{children:[Object(E.jsx)("div",{className:"head",children:Object(E.jsxs)("div",{className:"container",children:[Object(E.jsxs)("div",{className:"about",children:[Object(E.jsx)("h4",{className:"text-white",children:"About"}),Object(E.jsx)("p",{className:"text-muted",children:"On this page you can buy the photos that capture those moments of joy, sacrifice and emotion that you or someone else have gone through. The images are taken with excellent quality by the hand of a professional photographer."})]}),Object(E.jsxs)("div",{className:"contact",children:[Object(E.jsx)("h4",{className:"",children:"Contact"}),Object(E.jsxs)("ul",{className:"list-unstyled",children:[Object(E.jsxs)("li",{children:[Object(E.jsx)("span",{children:Object(E.jsx)(C.a,{})}),Object(E.jsx)("a",{href:"https://twitter.com/",className:"text-white",children:"Mail"})]}),Object(E.jsxs)("li",{children:[Object(E.jsx)("span",{children:Object(E.jsx)(k.a,{})}),Object(E.jsx)("a",{href:"https://www.facebook.com/rudy.resiete",className:"text-white",children:"Like on Facebook"})]}),Object(E.jsxs)("li",{children:[Object(E.jsx)("span",{children:Object(E.jsx)(k.b,{})}),Object(E.jsx)("a",{href:"https://www.instagram.com/rodolfo_hdz_rdz/",className:"text-white",children:"Instagram"})]})]})]})]})}),Object(E.jsxs)("div",{className:"bar",children:[Object(E.jsx)("div",{className:"bar-1",onClick:this.onSideClick,children:Object(E.jsx)("span",{children:"side"===x.a.getState().windClick.side?Object(E.jsx)(w.b,{}):Object(E.jsx)(w.c,{})})}),Object(E.jsxs)("div",{className:"bar-2 ".concat("buy"===c?"active":""),onClick:function(){e.onBuyClick("buy")},children:[Object(E.jsx)("span",{className:"count",children:n}),Object(E.jsx)("span",{children:Object(E.jsx)(N.a,{})})]}),Object(E.jsx)("div",{className:"bar-3",onClick:this.onDownClick,children:Object(E.jsx)("span",{children:"up"===x.a.getState().windClick.up?Object(E.jsx)(w.d,{}):Object(E.jsx)(w.a,{})})})]})]})}}]),n}(h.a.Component),_=function(t){return Object(E.jsx)("div",{className:"tabs-container",onClick:function(t){return t.stopPropagation()},children:Object(E.jsxs)("div",{className:"tabs",children:[Object(E.jsx)("div",{onClick:function(){t.onClick("All")},children:Object(E.jsx)("div",{className:"All"===t.active?"active":"",children:Object(E.jsx)("span",{children:"All"})})}),t.titles.map((function(e,n){return Object(E.jsx)("div",{onClick:function(){return t.onClick(e)},children:Object(E.jsx)("div",{className:t.active===e?"active":"",children:Object(E.jsx)("span",{children:e})})},n)}))]})})},K=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).onClick=function(t){x.a.dispatch({type:"OPEN_THREAD",title:t})},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;x.a.subscribe((function(){t.forceUpdate()}))}},{key:"render",value:function(){var t=x.a.getState().threads.map((function(t){return t.title})),e=x.a.getState().active;return Object(E.jsx)(_,{titles:t,onClick:this.onClick,active:e})}}]),n}(h.a.Component),B=function(t){return Object(E.jsxs)("div",{className:"pic ".concat(t.purchased?"purchased":""),children:[Object(E.jsx)("img",{src:"/".concat(t.url),alt:""}),Object(E.jsx)("div",{className:"buy-mark ".concat(t.buy?"active-buy":""),onClick:function(){t.markClick(t.title,t.url,t.buy)},children:Object(E.jsxs)("span",{children:[" ",t.buy?Object(E.jsx)(S.a,{}):"Buy"," "]})})]},t.index)},H=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).markClick=function(t,e,n){x.a.dispatch({type:"MARK-BUY",title:t,url:e,buy:n})},t.onOpenPay=function(t){L(),x.a.dispatch({type:"OPEN_PAY",promise:P,number:t})},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;x.a.subscribe((function(){t.forceUpdate()}))}},{key:"render",value:function(){var t=this,e=[],n=!1,a=x.a.getState(),c=a.threads,r=a.active,s=0,i=0;switch(r){case"All":c.forEach((function(t){t.urls.forEach((function(n){e.push({title:t.title,url:n.url,buy:n.buy})}))}));break;case"buy":var o=0;a.buy.forEach((function(t){t.urls.forEach((function(c){s++;var r=a.purchasedPhotos.find((function(t){return t===c.url}));r&&o++;var i=!!r;n=(n||!i)&&!0,e.push({title:t.title,url:c.url,buy:c.buy,purchased:i})}))})),i=s-o;break;default:var u=c.find((function(t){return t.title===a.active}));u.urls.forEach((function(t){e.push({title:u.title,url:t.url,buy:t.buy})}))}return Object(E.jsxs)("div",{className:"container-photos",children:[Object(E.jsxs)("div",{className:"top-content",style:{backgroundImage:"url(".concat(f.a,")")},children:[Object(E.jsx)("div",{id:"photo",style:{backgroundImage:"url(".concat(y.a,")")}}),Object(E.jsx)("p",{children:'"La vida est\xe1 formada por una secuencia de eventos que las im\xe1genes en serie a veces reflejan mucho mejor" John Ingledew'})]}),Object(E.jsx)("div",{className:"photo-gallery",children:e.map((function(e,n){return Object(E.jsx)(B,{url:e.url,buy:e.buy,title:e.title,markClick:t.markClick,purchased:e.purchased},n)}))}),"buy"===r&&s>0?Object(E.jsx)("div",{children:Object(E.jsx)("button",{className:"".concat(n?"":"download-btn"),type:"submit",onClick:function(){n?t.onOpenPay(i):I().then((function(){x.a.dispatch({type:"SUCCEED",payload:x.a.getState().buy})}))},children:n?"Buy":"Download"})}):""]})}}]),n}(h.a.Component),J=function(t){Object(i.a)(n,t);var e=Object(o.a)(n);function n(){var t;Object(r.a)(this,n);for(var a=arguments.length,c=new Array(a),s=0;s<a;s++)c[s]=arguments[s];return(t=e.call.apply(e,[this].concat(c))).onClosePay=function(){L(),x.a.dispatch({type:"CLOSE_PAY",status:"close",open:!1,number:T})},t}return Object(s.a)(n,[{key:"componentDidMount",value:function(){var t=this;x.a.subscribe((function(){t.forceUpdate()}))}},{key:"render",value:function(){var t=x.a.getState().pay;return t.open?Object(E.jsxs)("div",{className:"AppStripe",children:[Object(E.jsx)("span",{className:"close",onClick:this.onClosePay,children:Object(E.jsx)(w.e,{})}),Object(E.jsx)(v.Elements,{stripe:t.loadStripe,children:Object(E.jsx)(m.a,{store:x.a,download:I})})]}):""}}]),n}(h.a.Component);e.a=function(){return Object(E.jsxs)("div",{children:[Object(E.jsx)(U,{}),Object(E.jsx)(K,{}),Object(E.jsx)(H,{}),Object(E.jsx)(J,{})]})}}).call(this,n(22).Buffer)},27:function(t,e,n){"use strict";e.a=n.p+"static/media/fondo.e5ba6fa2.jpg"},28:function(t,e,n){"use strict";e.a=n.p+"static/media/Rudy.44a2eb3b.jpg"},30:function(t,e,n){"use strict";n.d(e,"a",(function(){return l}));var a=n(5),c=n.n(a),r=n(7),s=n(11),i=n(3),o=n(8),u=n(1);function l(t){var e=Object(i.useState)(!1),n=Object(s.a)(e,2),a=n[0],l=n[1],d=Object(i.useState)(null),h=Object(s.a)(d,2),b=h[0],p=h[1],j=Object(i.useState)(""),f=Object(s.a)(j,2),y=f[0],O=f[1],v=Object(i.useState)(!0),m=Object(s.a)(v,2),x=m[0],g=m[1],C=Object(i.useState)(""),k=Object(s.a)(C,2),w=k[0],S=k[1],N=Object(o.useStripe)(),E=Object(o.useElements)();Object(i.useEffect)((function(){window.fetch("/create-payment-intent",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({items:t.store.getState().pay.number})}).then((function(t){return t.json()})).then((function(t){S(t.clientSecret)}))}),[]);var P=function(){var t=Object(r.a)(c.a.mark((function t(e){return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:g(e.empty),p(e.error?e.error.message:"");case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),I=function(){var e=Object(r.a)(c.a.mark((function e(n){var a;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),O(!0),e.next=4,N.confirmCardPayment(w,{payment_method:{card:E.getElement(o.CardElement)}});case 4:(a=e.sent).error?(p("Payment failed ".concat(a.error.message)),O(!1)):(p(null),O(!1),l(!0),t.download().then((function(){t.store.dispatch({type:"SUCCEED",payload:t.store.getState().buy})})));case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(u.jsxs)("form",{id:"payment-form",onSubmit:I,children:[Object(u.jsx)(o.CardElement,{id:"card-element",options:{style:{base:{color:"#32325d",fontFamily:"Arial, sans-serif",fontSmoothing:"antialiased",fontSize:"15px","::placeholder":{color:"#32325d"}},invalid:{color:"#fa755a",iconColor:"#fa755a",fontSize:"15px"}}},onChange:P}),Object(u.jsx)("button",{className:"stripe-button",disabled:y||x||a,id:"submit",children:Object(u.jsx)("span",{id:"button-text",children:y?Object(u.jsx)("div",{className:"spinner",id:"spinner"}):"Pay now"})}),b&&Object(u.jsx)("div",{className:"card-error",role:"alert",children:b}),Object(u.jsx)("p",{className:a?"result-message":"result-message hidden",children:"Payment succeeded"})]})}},31:function(t,e,n){"use strict";var a=n(18),c=n.n(a);function r(t){if(t.status>=200&&t.status<300)return t;var e=new Error("HTTP Error ".concat(t.statusText));throw e.status=t.statusText,e.response=t,console.log(e),e}e.a=function(t){return c()("/api/send",{method:"post",body:JSON.stringify(t),headers:{Accept:"*","Content-Type":"application/json"}}).then(r).then((function(t){return t.json()})).then((function(t){return console.log(t),t}))}},39:function(t,e,n){},49:function(t,e,n){},50:function(t,e,n){},51:function(t,e,n){"use strict";n.r(e);n(3);var a=n(23),c=n.n(a),r=(n(39),n(24)),s=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,52)).then((function(e){var n=e.getCLS,a=e.getFID,c=e.getFCP,r=e.getLCP,s=e.getTTFB;n(t),a(t),c(t),r(t),s(t)}))},i=n(1);c.a.render(Object(i.jsx)(r.a,{}),document.getElementById("root")),s()}},[[51,1,2]]]);
//# sourceMappingURL=main.a1e69adc.chunk.js.map